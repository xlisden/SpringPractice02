<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title> Edit employee </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

<div class="container">
	<h2 class="mt-5"> Edit employee </h2>
	<div class="row mt-4">
	<div class="col-8">
		<div class="form-group">
		<form method="post" enctype="multipart/form-data" th:object="${employeeDto}">
			<div class="row">
				<div class="col-1">
					<div class="form-floating mb-3">
						<input th:value="${employee.id}" readonly id="floatId" placeholder="id" class="form-control"> <p></p>
						<label for="floatId">Id</label>
					</div>
				</div>
				<div class="col-4">
					<div class="form-floating mb-3">
						<input th:field="${employeeDto.cod}" id="floatCod" placeholder="cod" class="form-control"> <p></p>
						<p th:if="${#fields.hasErrors('cod')}" th:errorclass="text-danger" th:errors="${employeeDto.cod}"></p>
						<label for="floatCod">Cod</label>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-2">
					<div class="form-floating mb-3">
						<input th:field="${employeeDto.name}" id="floatName" placeholder="name" class="form-control"> <p></p>
						<p th:if="${#fields.hasErrors('name')}" th:errorclass="text-danger" th:errors="${employeeDto.name}"></p>
						<label for="floatName">Name</label>
					</div>	
				</div>
				<div class="col-3">
					<div class="form-floating mb-3">
						<input th:field="${employeeDto.lastName}" id="floatLastName" placeholder="lastName" class="form-control"> <p></p>
						<p th:if="${#fields.hasErrors('lastName')}" th:errorclass="text-danger" th:errors="${employeeDto.lastName}"></p>
						<label for="floatLastName">Last Name</label>
					</div>	
				</div>
			</div>
			<div class="row">
				<div class="col-3">
					<div class="form-floating mb-3">
						<input th:field="${employeeDto.position}" id="floatPosition" placeholder="position" class="form-control"> <p></p>
						<p th:if="${#fields.hasErrors('position')}" th:errorclass="text-danger" th:errors="${employeeDto.position}"></p>
						<label for="floatPosition">Position</label>
					</div>	
				</div>
				<div class="col-2">
					<div class="form-floating mb-3">
						<input th:field="${employeeDto.department}" id="floatDepartment" placeholder="department employee" class="form-control"> <p></p>
						<p th:if="${#fields.hasErrors('department')}" th:errorclass="text-danger" th:errors="${employeeDto.department}"></p>
						<label for="floatDepartment">Department</label>
					</div>	
				</div>
			</div>
			<input type="submit" value="Submit" class="btn btn-primary">
			<div class="mt-2">
				<a href="/employees" class="btn btn-outline-primary"> Go to Employees </a> 
				<a href="/" class="btn btn-outline-primary"> Go to Assignments </a>
			</div>
		</form> 
		</div>
	</div>
	<div class="col">
	  <table class="table table-sm">
	    <thead>
	      <tr>
	        <th>Id</th>
	        <th>Cod</th>
	        <th>Project</th>
	        <th>Operations</th>
	      </tr>
	    </thead>
	    <tbody>
	      <tr th:each="asignacion: ${asignaciones}">
	        <td th:text="${asignacion.project.id}"></td>
	        <td th:text="${asignacion.project.cod}"></td>
	        <td th:text="${asignacion.project.name}"></td>
	        <td>
	          <a th:href="@{/employees/assign(idEmployee=${employee.id}, idProject=${asignacion.project.id})}" th:if="${!asignacion.isAssignment}" class="btn btn-warning btn-sm"> Assign </a>
	          <a th:href="@{/employees/remove(idEmployee=${employee.id}, idProject=${asignacion.project.id})}" th:if="${asignacion.isAssignment}" class="btn btn-danger btn-sm"> Remove </a>
	        </td>
	      </tr>
	    </tbody>
	  </table>
	</div>
	</div>
</div>

</body>
</html>